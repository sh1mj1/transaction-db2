<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="com.jdbc2.service.OrderServiceTest" tests="1" skipped="0" failures="0" errors="0" timestamp="2023-02-23T11:58:38" hostname="simjihuns-MacBook-Air.local" time="0.146">
  <properties/>
  <testcase name="bizException()" classname="com.jdbc2.service.OrderServiceTest" time="0.146"/>
  <system-out><![CDATA[20:58:36.760 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]
20:58:36.764 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]
20:58:36.776 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [com.jdbc2.service.OrderServiceTest] from class [org.springframework.boot.test.context.SpringBootTestContextBootstrapper]
20:58:36.782 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.jdbc2.service.OrderServiceTest], using SpringBootContextLoader
20:58:36.783 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [com.jdbc2.service.OrderServiceTest]: class path resource [com/jdbc2/service/OrderServiceTest-context.xml] does not exist
20:58:36.784 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [com.jdbc2.service.OrderServiceTest]: class path resource [com/jdbc2/service/OrderServiceTestContext.groovy] does not exist
20:58:36.784 [Test worker] INFO org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.jdbc2.service.OrderServiceTest]: no resource found for suffixes {-context.xml, Context.groovy}.
20:58:36.784 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.jdbc2.service.OrderServiceTest]: OrderServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
20:58:36.802 [Test worker] DEBUG org.springframework.test.context.support.ActiveProfilesUtils - Could not find an 'annotation declaring class' for annotation type [org.springframework.test.context.ActiveProfiles] and class [com.jdbc2.service.OrderServiceTest]
20:58:36.830 [Test worker] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [/Users/simjihun/javaSpring/transaction-db2/build/classes/java/main/com/jdbc2/Jdbc2Application.class]
20:58:36.831 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.jdbc2.Jdbc2Application for test class com.jdbc2.service.OrderServiceTest
20:58:36.859 [Test worker] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - @TestExecutionListeners is not present for class [com.jdbc2.service.OrderServiceTest]: using defaults.
20:58:36.860 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
20:58:36.866 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@4763c727, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@72445aba, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@61bcd567, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1c80e49b, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@458342d3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@15c25153, org.springframework.test.context.transaction.TransactionalTestExecutionListener@1252b961, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@9ed238c, org.springframework.test.context.event.EventPublishingTestExecutionListener@56276db8, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@51e8e6e6, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@56f6d40b, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@36676c1a, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5b408dc3, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@4d098f9b, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@2dbf4cbd]
20:58:36.868 [Test worker] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: context [DefaultTestContext@6f603e89 testClass = OrderServiceTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@2756c0a7 testClass = OrderServiceTest, locations = '{}', classes = '{class com.jdbc2.Jdbc2Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@1fc32e4f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@61fe30, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7b420819, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4b41dd5c, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@64bce832, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@31f9b85e], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true]], class annotated with @DirtiesContext [false] with mode [null].

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.0)

2023-02-23 20:58:36.985  INFO 50529 --- [    Test worker] com.jdbc2.service.OrderServiceTest       : Starting OrderServiceTest using Java 17.0.5 on simjihuns-MacBook-Air.local with PID 50529 (started by simjihun in /Users/simjihun/javaSpring/transaction-db2)
2023-02-23 20:58:36.985  INFO 50529 --- [    Test worker] com.jdbc2.service.OrderServiceTest       : No active profile set, falling back to 1 default profile: "default"
2023-02-23 20:58:37.232  INFO 50529 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-02-23 20:58:37.255  INFO 50529 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 20 ms. Found 1 JPA repository interfaces.
2023-02-23 20:58:37.463  INFO 50529 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-02-23 20:58:37.541  INFO 50529 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-02-23 20:58:37.573  INFO 50529 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-02-23 20:58:37.592  INFO 50529 --- [    Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-02-23 20:58:37.662  INFO 50529 --- [    Test worker] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-02-23 20:58:37.707  INFO 50529 --- [    Test worker] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-02-23 20:58:37.909 DEBUG 50529 --- [    Test worker] org.hibernate.SQL                        : drop table if exists orders CASCADE 
2023-02-23 20:58:37.911 DEBUG 50529 --- [    Test worker] org.hibernate.SQL                        : drop sequence if exists hibernate_sequence
2023-02-23 20:58:37.912 DEBUG 50529 --- [    Test worker] org.hibernate.SQL                        : create sequence hibernate_sequence start with 1 increment by 1
2023-02-23 20:58:37.913 DEBUG 50529 --- [    Test worker] org.hibernate.SQL                        : create table orders (id bigint not null, pay_status varchar(255), username varchar(255), primary key (id))
2023-02-23 20:58:37.916  INFO 50529 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-02-23 20:58:37.919  INFO 50529 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-02-23 20:58:38.127  WARN 50529 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-02-23 20:58:38.346  INFO 50529 --- [    Test worker] com.jdbc2.service.OrderServiceTest       : Started OrderServiceTest in 1.461 seconds (JVM running for 1.922)
2023-02-23 20:58:38.428 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Creating new transaction with name [com.jdbc2.service.OrderService.order]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2023-02-23 20:58:38.428 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Opened new EntityManager [SessionImpl(2121893816<open>)] for JPA transaction
2023-02-23 20:58:38.430 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1812b564]
2023-02-23 20:58:38.430 TRACE 50529 --- [    Test worker] o.s.t.i.TransactionInterceptor           : Getting transaction for [com.jdbc2.service.OrderService.order]
2023-02-23 20:58:38.434  INFO 50529 --- [    Test worker] com.jdbc2.service.OrderService           : order 호출
2023-02-23 20:58:38.436 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Found thread-bound EntityManager [SessionImpl(2121893816<open>)] for JPA transaction
2023-02-23 20:58:38.437 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Participating in existing transaction
2023-02-23 20:58:38.437 TRACE 50529 --- [    Test worker] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2023-02-23 20:58:38.441 DEBUG 50529 --- [    Test worker] org.hibernate.SQL                        : call next value for hibernate_sequence
2023-02-23 20:58:38.458 TRACE 50529 --- [    Test worker] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2023-02-23 20:58:38.459  INFO 50529 --- [    Test worker] com.jdbc2.service.OrderService           : 결제 프로세스 진입
2023-02-23 20:58:38.459  INFO 50529 --- [    Test worker] com.jdbc2.service.OrderService           : 잔고 부족 비즈니스 예외 발생
2023-02-23 20:58:38.459 TRACE 50529 --- [    Test worker] o.s.t.i.TransactionInterceptor           : Completing transaction for [com.jdbc2.service.OrderService.order] after exception: com.jdbc2.exception.NotEnoughMoneyException: 잔고가 부족합니다
2023-02-23 20:58:38.459 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Initiating transaction commit
2023-02-23 20:58:38.459 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Committing JPA transaction on EntityManager [SessionImpl(2121893816<open>)]
2023-02-23 20:58:38.462 DEBUG 50529 --- [    Test worker] org.hibernate.SQL                        : insert into orders (pay_status, username, id) values (?, ?, ?)
2023-02-23 20:58:38.464 DEBUG 50529 --- [    Test worker] org.hibernate.SQL                        : update orders set pay_status=?, username=? where id=?
2023-02-23 20:58:38.466 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Closing JPA EntityManager [SessionImpl(2121893816<open>)] after transaction
2023-02-23 20:58:38.466  INFO 50529 --- [    Test worker] com.jdbc2.service.OrderServiceTest       : 고객에게 잔고 부족을 알리고 별도의 계좌로 입금하도록 안내
2023-02-23 20:58:38.466 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2023-02-23 20:58:38.466 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Opened new EntityManager [SessionImpl(161958547<open>)] for JPA transaction
2023-02-23 20:58:38.467 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@255d4d7]
2023-02-23 20:58:38.467 TRACE 50529 --- [    Test worker] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findById]
2023-02-23 20:58:38.470 DEBUG 50529 --- [    Test worker] org.hibernate.SQL                        : select order0_.id as id1_0_0_, order0_.pay_status as pay_stat2_0_0_, order0_.username as username3_0_0_ from orders order0_ where order0_.id=?
2023-02-23 20:58:38.474 TRACE 50529 --- [    Test worker] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findById]
2023-02-23 20:58:38.474 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Initiating transaction commit
2023-02-23 20:58:38.474 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Committing JPA transaction on EntityManager [SessionImpl(161958547<open>)]
2023-02-23 20:58:38.474 DEBUG 50529 --- [    Test worker] o.s.orm.jpa.JpaTransactionManager        : Closing JPA EntityManager [SessionImpl(161958547<open>)] after transaction
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
